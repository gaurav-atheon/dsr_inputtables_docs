version: 2

sources:
    - name: dsr_input
      description: Standard input tables for all inbound DSR data.
      database: AA_DSR_RAW
      tables:
        - name: input_organisation_mapping
          description: Raw organisation data from origin organisations.
          tests:
            - dbt_utils.unique_combination_of_columns:
                combination_of_columns:
                  - origin_organisation_number
                  - business_organisation_number
                  - loaded_timestamp
          columns:
            - name: origin_organisation_number
              description: Number of the organisation, as defined by the master, that is submitting this data record.
              tests:
                - not_null
            - name: business_organisation_number
              description: Number that the origin organisation uses to refer to the subject organisation.
            - name: business_organisation_name
              description: Name of the subject organisation according to the origin organisation.

        - name: input_organisation
          description: Raw organisation attributes and parentage.
          tests:
            - dbt_utils.unique_combination_of_columns:
                combination_of_columns:
                  - business_organisation_number
                  - origin_organisation_number
                  - loaded_timestamp
          columns:
            - name: business_organisation_number
              description: Nummber assigned to the organisation by the origin.
            - name: business_organisation_number
              description: Number assigned to the organisation by the origin organisation.
              tests:
                - not_null
            - name: parent_organisation_number
              description: If this organisation is the child to another organisation, this field holds the business orgnasation number of the parent organisation.

            - name: parent_organisation_number
              description: If this organisation is the child to another organisation, this field holds the business organisation number of the parent organisation.

        - name: input_storedaysku_orders
          description: Raw store order metrics from source databases

        - name: input_location
          description: Raw location data from origin organisations.

        - name: input_date
          description: Raw date data.

        - name: input_calendar
          description: Raw date data from origin organisations.

        - name: input_sku
          description: Raw product data from origin organisations.

        - name: input_sku_grouping
          description: Raw product data from origin organisations.

        - name: input_locationdaysku_inventory
          description: Raw store order metrics from source databases

        - name: input_locationdaycase_inventory
          description: Raw store order metrics from source databases

        - name: input_case
          description: Raw product data from origin organisations.

        - name: input_case_grouping
          description: Raw product data from origin organisations.

        - name: input_orgdepotdaycase_orders
          description: Raw product data from origin organisations.

        - name: input_depotstoredaysku_orders
          description: Raw product data from origin organisations.